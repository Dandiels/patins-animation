/* Seção de galeria de imagens. */
section.gallery
{
    /* Limita a largura da seção e centraliza na página. */
    max-width: 22.5rem;
    width: 100%;
    padding: 1.5rem;
    margin-inline: auto;

    /* Cabeçalho da galeria. */
    & header
    {
        text-align: center;
    }

    /* Texto auxiliar acima do título. */
    & header span
    {
        font: 500 0.75rem/1.5 var(--ff-base);
        text-transform: uppercase;
        display: block;
    }

    /* Título da galeria. */
    & header h2
    {
        margin-top: 0.5rem;
    }

    /* Imagens responsivas. */
    & img
    {
        width: 100%;
        height: auto;
        display: block;
    }

    /* Container das imagens. */
    & .content
    {
        margin-top: 1.5rem;
        display: grid;
        gap: 1.5rem;
    }

    /* Card individual da galeria. */
    & figure
    {
        position: relative;
        border-radius: 2.5rem;
        overflow: hidden;

        /* Imagem principal do card. */
        & > img
        {
            height: 16rem;
            object-fit: cover;
            transition: scale 500ms;
        }

        /* Interações ao passar o mouse. */
        &:hover
        {
            /* Zoom suave da imagem. */
            & > img
            {
                scale: 1.1;
            }

            /* Exibe a legenda. */
            & figcaption
            {
                transform: translateY(0);
            }
        }
    }

    /* Legenda da imagem. */
    & figcaption
    {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        gap: 0.5rem;

        font: 500 var(--text-sm)/1.6 var(--ff-base);
        color: white;

        position: absolute;
        bottom: 0;
        width: 100%;

        padding: 1.5rem 2rem;

        /* Inicialmente escondida abaixo da imagem. */
        transform: translateY(100%);
        transition: transform 500ms;

        /* Gradiente para garantir contraste do texto. */
        background: linear-gradient(
            180deg,
            rgba(0, 0, 0, 0) 0%,
            rgba(0, 0, 0, 0) 0.01%,
            rgba(0, 0, 0, 0.64) 100%
        );

        /* Avatar do usuário. */
        & > img
        {
            width: 2rem;
            aspect-ratio: 1/1;
            object-fit: cover;
        }
    }
}

/* Ajustes e animações para telas grandes (desktop). */
@media (width >= 80em)
{
    section.gallery
    {
        max-width: 80rem;
        padding: 2.5rem 0 0;
        
        /* Ajuste do texto auxiliar. */
        & header span
        {
            font-size: var(--text-sm);
        }

        /* Margem lateral do título. */
        & header h2
        {
            margin-inline: 2rem;
        }

        /* Grid mais complexo no desktop. */
        & .content
        {
            margin-top: 0;
            padding: 2rem;

            grid-template-areas:
                "A B B"
                "C C D";
            gap: 2rem;
        }

        /* Animação de entrada das imagens baseada no scroll. */
        & figure
        {
            animation: image-appear linear backwards;
            animation-timeline: view();
            animation-range: 100px 300px;

            /* Atraso adicional para alguns cards. */
            &[data-delay]
            {
                animation-range: 150px 350px;
            }

            /* Imagens maiores no desktop. */
            & > img
            {
                height: 25rem;
            }

            /* Mapeamento das áreas do grid. */
            &:nth-child(1)
            {
                grid-area: A;
            }

            &:nth-child(2)
            {
                grid-area: B;
            }

            &:nth-child(3)
            {
                grid-area: C;
            }

            &:nth-child(4)
            {
                grid-area: D;
            }
        }
    }

    /* Animação de entrada vertical das imagens. */
    @keyframes image-appear
    {
        from
        {
            transform: translateY(100%);
        }
    }
}